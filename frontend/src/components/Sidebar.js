import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { NavLink, useLocation } from 'react-router-dom';
import { useUIStore } from '../stores/useUIStore';
import { LayoutDashboard, Users, Wallet, CalendarCheck, UserCog, Settings, Building2, Home, ArrowDownUp, LogIn, LogOut, GraduationCap } from 'lucide-react';
import { motion, AnimatePresence } from 'framer-motion';
import { useState } from 'react';
const menu = [
    { to: '/', label: 'Dashboard', icon: LayoutDashboard },
    // Kesantrian akan dibuat sebagai parent collapsible, submenus di bawah
    { to: '/keuangan', label: 'Keuangan', icon: Wallet },
    { to: '/absensi', label: 'Absensi', icon: CalendarCheck },
    { to: '/pengguna', label: 'Pengguna', icon: UserCog },
    { to: '/pengaturan', label: 'Pengaturan', icon: Settings },
];
export default function Sidebar() {
    const { sidebarOpen } = useUIStore();
    const [kesantrianOpen, setKesantrianOpen] = useState(true);
    const location = useLocation();
    const kesantrianActive = location.pathname.startsWith('/kesantrian');
    return (_jsxs(motion.aside, { initial: { width: 260 }, animate: { width: sidebarOpen ? 260 : 72 }, transition: { type: 'spring', stiffness: 200, damping: 25 }, className: "h-screen border-r border-gray-200 bg-[#F5F5F5]", children: [_jsx("div", { className: "px-4 py-4", children: _jsxs("div", { className: "flex items-center gap-2", children: [_jsx("div", { className: "w-8 h-8 rounded bg-brand" }), sidebarOpen && _jsx("span", { className: "font-semibold", children: "SIMPELS v2" })] }) }), _jsxs("nav", { className: "px-2 space-y-1", children: [_jsxs("div", { className: "space-y-1", children: [_jsxs("button", { type: "button", onClick: () => setKesantrianOpen((v) => !v), className: `w-full flex items-center gap-3 rounded-md px-3 py-2 text-sm ${kesantrianActive ? 'bg-white text-brand shadow-sm' : 'text-gray-700 hover:bg-white'}`, children: [_jsx(Users, { className: "w-5 h-5" }), sidebarOpen && _jsx("span", { children: "Kesantrian" })] }), _jsx(AnimatePresence, { initial: false, children: kesantrianOpen && (_jsxs(motion.ul, { initial: { height: 0, opacity: 0 }, animate: { height: 'auto', opacity: 1 }, exit: { height: 0, opacity: 0 }, transition: { type: 'tween', duration: 0.2 }, className: "ml-1 space-y-1 overflow-hidden", children: [_jsx("li", { children: _jsxs(NavLink, { to: "/kesantrian/santri", className: ({ isActive }) => `flex items-center gap-3 rounded-md px-3 py-2 text-sm ${isActive ? 'bg-white text-brand shadow-sm' : 'text-gray-700 hover:bg-white'}`, children: [_jsx(Users, { className: "w-5 h-5" }), sidebarOpen && _jsx("span", { children: "Data Santri" })] }) }), _jsx("li", { children: _jsxs(NavLink, { to: "/kesantrian/kelas", className: ({ isActive }) => `flex items-center gap-3 rounded-md px-3 py-2 text-sm ${isActive ? 'bg-white text-brand shadow-sm' : 'text-gray-700 hover:bg-white'}`, children: [_jsx(Building2, { className: "w-5 h-5" }), sidebarOpen && _jsx("span", { children: "Kelas" })] }) }), _jsx("li", { children: _jsxs(NavLink, { to: "/kesantrian/asrama", className: ({ isActive }) => `flex items-center gap-3 rounded-md px-3 py-2 text-sm ${isActive ? 'bg-white text-brand shadow-sm' : 'text-gray-700 hover:bg-white'}`, children: [_jsx(Home, { className: "w-5 h-5" }), sidebarOpen && _jsx("span", { children: "Asrama" })] }) }), _jsx("li", { children: _jsxs("div", { className: "flex items-center gap-3 rounded-md px-3 py-2 text-sm text-gray-500", children: [_jsx(ArrowDownUp, { className: "w-5 h-5" }), sidebarOpen && _jsx("span", { children: "Mutasi" })] }) }), _jsx("li", { children: _jsxs(NavLink, { to: "/kesantrian/mutasi/masuk", className: ({ isActive }) => `flex items-center gap-3 rounded-md px-3 py-2 text-sm ${isActive ? 'bg-white text-brand shadow-sm' : 'text-gray-700 hover:bg-white'}`, children: [_jsx(LogIn, { className: "w-5 h-5" }), sidebarOpen && _jsx("span", { children: "Masuk" })] }) }), _jsx("li", { children: _jsxs(NavLink, { to: "/kesantrian/mutasi/keluar", className: ({ isActive }) => `flex items-center gap-3 rounded-md px-3 py-2 text-sm ${isActive ? 'bg-white text-brand shadow-sm' : 'text-gray-700 hover:bg-white'}`, children: [_jsx(LogOut, { className: "w-5 h-5" }), sidebarOpen && _jsx("span", { children: "Keluar" })] }) }), _jsx("li", { children: _jsxs(NavLink, { to: "/kesantrian/alumni", className: ({ isActive }) => `flex items-center gap-3 rounded-md px-3 py-2 text-sm ${isActive ? 'bg-white text-brand shadow-sm' : 'text-gray-700 hover:bg-white'}`, children: [_jsx(GraduationCap, { className: "w-5 h-5" }), sidebarOpen && _jsx("span", { children: "Alumni" })] }) })] })) })] }), menu.map((m) => {
                        const Icon = m.icon;
                        return (_jsxs(NavLink, { to: m.to, className: ({ isActive }) => `flex items-center gap-3 rounded-md px-3 py-2 text-sm ${isActive ? 'bg-white text-brand shadow-sm' : 'text-gray-700 hover:bg-white'}`, children: [_jsx(Icon, { className: "w-5 h-5" }), sidebarOpen && _jsx("span", { children: m.label })] }, m.to));
                    })] })] }));
}
